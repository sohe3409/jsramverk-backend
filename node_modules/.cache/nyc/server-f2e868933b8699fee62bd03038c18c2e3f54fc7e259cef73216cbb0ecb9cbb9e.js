"use strict";function cov_21rcbt9bay(){var path="C:\\cygwin64\\home\\sofia\\dbwebb-kurser\\jsramverk\\backend\\src\\server.js";var hash="5e57f38590d76bb1546d534be7af2e71ecdd20cc";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\cygwin64\\home\\sofia\\dbwebb-kurser\\jsramverk\\backend\\src\\server.js",statementMap:{"0":{start:{line:3,column:17},end:{line:3,column:45}},"1":{start:{line:4,column:17},end:{line:4,column:44}},"2":{start:{line:10,column:4},end:{line:17,column:5}},"3":{start:{line:11,column:8},end:{line:11,column:36}},"4":{start:{line:12,column:8},end:{line:12,column:56}},"5":{start:{line:15,column:8},end:{line:15,column:31}},"6":{start:{line:16,column:8},end:{line:16,column:21}},"7":{start:{line:24,column:2},end:{line:36,column:3}},"8":{start:{line:25,column:6},end:{line:25,column:34}},"9":{start:{line:26,column:18},end:{line:29,column:7}},"10":{start:{line:30,column:21},end:{line:30,column:46}},"11":{start:{line:31,column:6},end:{line:33,column:8}},"12":{start:{line:35,column:6},end:{line:35,column:30}},"13":{start:{line:43,column:2},end:{line:65,column:5}},"14":{start:{line:44,column:8},end:{line:44,column:36}},"15":{start:{line:45,column:23},end:{line:45,column:44}},"16":{start:{line:47,column:20},end:{line:52,column:9}},"17":{start:{line:54,column:23},end:{line:54,column:65}},"18":{start:{line:56,column:8},end:{line:62,column:9}},"19":{start:{line:57,column:12},end:{line:57,column:36}},"20":{start:{line:59,column:12},end:{line:61,column:14}},"21":{start:{line:64,column:8},end:{line:64,column:32}},"22":{start:{line:68,column:0},end:{line:72,column:2}}},fnMap:{"0":{name:"getDocs",decl:{start:{line:6,column:15},end:{line:6,column:22}},loc:{start:{line:6,column:25},end:{line:18,column:1}},line:6},"1":{name:"createDoc",decl:{start:{line:21,column:15},end:{line:21,column:24}},loc:{start:{line:21,column:31},end:{line:37,column:1}},line:21},"2":{name:"updateDoc",decl:{start:{line:40,column:15},end:{line:40,column:24}},loc:{start:{line:40,column:35},end:{line:66,column:1}},line:40}},branchMap:{"0":{loc:{start:{line:56,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:56,column:8},end:{line:62,column:9}},{start:{line:56,column:8},end:{line:62,column:9}}],line:56}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5e57f38590d76bb1546d534be7af2e71ecdd20cc"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_21rcbt9bay=function(){return actualCoverage;};}return actualCoverage;}cov_21rcbt9bay();const database=(cov_21rcbt9bay().s[0]++,require("../db/database.js"));const ObjectId=(cov_21rcbt9bay().s[1]++,require("mongodb").ObjectId);async function getDocs(){cov_21rcbt9bay().f[0]++;let db;let result;cov_21rcbt9bay().s[2]++;try{cov_21rcbt9bay().s[3]++;db=await database.getDb();cov_21rcbt9bay().s[4]++;result=await db.collection.find({}).toArray();}finally{cov_21rcbt9bay().s[5]++;await db.client.close();cov_21rcbt9bay().s[6]++;return result;}}async function createDoc(body){cov_21rcbt9bay().f[1]++;let db;cov_21rcbt9bay().s[7]++;try{cov_21rcbt9bay().s[8]++;db=await database.getDb();const doc=(cov_21rcbt9bay().s[9]++,{name:body.name,content:body.content});const result=(cov_21rcbt9bay().s[10]++,await docs.insertOne(doc));cov_21rcbt9bay().s[11]++;console.log(`A new document with _id: ${result.insertedId} was created.`);}finally{cov_21rcbt9bay().s[12]++;await db.client.close();}}async function updateDoc(id,body){cov_21rcbt9bay().f[2]++;let db;cov_21rcbt9bay().s[13]++;try{cov_21rcbt9bay().s[14]++;db=await database.getDb();const filter=(cov_21rcbt9bay().s[15]++,{_id:ObjectId(id)});const doc=(cov_21rcbt9bay().s[16]++,{$set:{name:body.name,content:body.content}});const result=(cov_21rcbt9bay().s[17]++,await db.collection.updateOne(filter,doc));cov_21rcbt9bay().s[18]++;if(result.matchedCount==0){cov_21rcbt9bay().b[0][0]++;cov_21rcbt9bay().s[19]++;console.log("No match");}else{cov_21rcbt9bay().b[0][1]++;cov_21rcbt9bay().s[20]++;console.log(`${result.matchedCount} , updated ${result.modifiedCount}`);}}finally{cov_21rcbt9bay().s[21]++;await db.client.close();}}cov_21rcbt9bay().s[22]++;module.exports={getDocs,createDoc,updateDoc};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJkYXRhYmFzZSIsInJlcXVpcmUiLCJPYmplY3RJZCIsImdldERvY3MiLCJkYiIsInJlc3VsdCIsImdldERiIiwiY29sbGVjdGlvbiIsImZpbmQiLCJ0b0FycmF5IiwiY2xpZW50IiwiY2xvc2UiLCJjcmVhdGVEb2MiLCJib2R5IiwiZG9jIiwibmFtZSIsImNvbnRlbnQiLCJkb2NzIiwiaW5zZXJ0T25lIiwiY29uc29sZSIsImxvZyIsImluc2VydGVkSWQiLCJ1cGRhdGVEb2MiLCJpZCIsImZpbHRlciIsIl9pZCIsIiRzZXQiLCJ1cGRhdGVPbmUiLCJtYXRjaGVkQ291bnQiLCJtb2RpZmllZENvdW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsYSxxcEZBZVk7MkZBYlosS0FBTUEsQ0FBQUEsUUFBUSwwQkFBR0MsT0FBTyxDQUFDLG1CQUFELENBQVYsQ0FBZCxDQUNBLEtBQU1DLENBQUFBLFFBQVEsMEJBQUdELE9BQU8sQ0FBQyxTQUFELENBQVAsQ0FBbUJDLFFBQXRCLENBQWQsQ0FFQSxjQUFlQyxDQUFBQSxPQUFmLEVBQXlCLHlCQUNyQixHQUFJQyxDQUFBQSxFQUFKLENBQ0EsR0FBSUMsQ0FBQUEsTUFBSixDQUZxQix3QkFJckIsR0FBSSx5QkFDQUQsRUFBRSxDQUFHLEtBQU1KLENBQUFBLFFBQVEsQ0FBQ00sS0FBVCxFQUFYLENBREEsd0JBRUFELE1BQU0sQ0FBRyxLQUFNRCxDQUFBQSxFQUFFLENBQUNHLFVBQUgsQ0FBY0MsSUFBZCxDQUFtQixFQUFuQixFQUF1QkMsT0FBdkIsRUFBZixDQUNILENBSEQsT0FJUSx5QkFDSixLQUFNTCxDQUFBQSxFQUFFLENBQUNNLE1BQUgsQ0FBVUMsS0FBVixFQUFOLENBREksd0JBRUosTUFBT04sQ0FBQUEsTUFBUCxDQUNILENBQ0osQ0FHRCxjQUFlTyxDQUFBQSxTQUFmLENBQXlCQyxJQUF6QixDQUErQix5QkFDN0IsR0FBSVQsQ0FBQUEsRUFBSixDQUQ2Qix3QkFHN0IsR0FBSSx5QkFDQUEsRUFBRSxDQUFHLEtBQU1KLENBQUFBLFFBQVEsQ0FBQ00sS0FBVCxFQUFYLENBQ0EsS0FBTVEsQ0FBQUEsR0FBRywwQkFBRyxDQUNSQyxJQUFJLENBQUVGLElBQUksQ0FBQ0UsSUFESCxDQUVSQyxPQUFPLENBQUVILElBQUksQ0FBQ0csT0FGTixDQUFILENBQVQsQ0FJQSxLQUFNWCxDQUFBQSxNQUFNLDJCQUFHLEtBQU1ZLENBQUFBLElBQUksQ0FBQ0MsU0FBTCxDQUFlSixHQUFmLENBQVQsQ0FBWixDQU5BLHlCQU9BSyxPQUFPLENBQUNDLEdBQVIsQ0FDSyw0QkFBMkJmLE1BQU0sQ0FBQ2dCLFVBQVcsZUFEbEQsRUFHSCxDQVZELE9BVVUsMEJBQ04sS0FBTWpCLENBQUFBLEVBQUUsQ0FBQ00sTUFBSCxDQUFVQyxLQUFWLEVBQU4sQ0FDSCxDQUNGLENBR0QsY0FBZVcsQ0FBQUEsU0FBZixDQUF5QkMsRUFBekIsQ0FBNkJWLElBQTdCLENBQW1DLHlCQUNqQyxHQUFJVCxDQUFBQSxFQUFKLENBRGlDLHlCQUdqQyxHQUFJLDBCQUNFQSxFQUFFLENBQUcsS0FBTUosQ0FBQUEsUUFBUSxDQUFDTSxLQUFULEVBQVgsQ0FDQSxLQUFNa0IsQ0FBQUEsTUFBTSwyQkFBRyxDQUFFQyxHQUFHLENBQUV2QixRQUFRLENBQUNxQixFQUFELENBQWYsQ0FBSCxDQUFaLENBRUEsS0FBTVQsQ0FBQUEsR0FBRywyQkFBRyxDQUNSWSxJQUFJLENBQUUsQ0FDRlgsSUFBSSxDQUFFRixJQUFJLENBQUNFLElBRFQsQ0FFRkMsT0FBTyxDQUFFSCxJQUFJLENBQUNHLE9BRlosQ0FERSxDQUFILENBQVQsQ0FPQSxLQUFNWCxDQUFBQSxNQUFNLDJCQUFHLEtBQU1ELENBQUFBLEVBQUUsQ0FBQ0csVUFBSCxDQUFjb0IsU0FBZCxDQUF3QkgsTUFBeEIsQ0FBZ0NWLEdBQWhDLENBQVQsQ0FBWixDQVhGLHlCQWFFLEdBQUlULE1BQU0sQ0FBQ3VCLFlBQVAsRUFBdUIsQ0FBM0IsQ0FBOEIscURBQzFCVCxPQUFPLENBQUNDLEdBQVIsQ0FBWSxVQUFaLEVBQ0gsQ0FGRCxJQUVPLHFEQUNIRCxPQUFPLENBQUNDLEdBQVIsQ0FDSyxHQUFFZixNQUFNLENBQUN1QixZQUFhLGNBQWF2QixNQUFNLENBQUN3QixhQUFjLEVBRDdELEVBR0gsQ0FDSixDQXBCSCxPQW9CWSwwQkFDTixLQUFNekIsQ0FBQUEsRUFBRSxDQUFDTSxNQUFILENBQVVDLEtBQVYsRUFBTixDQUNILENBQ0osQyx5QkFFRG1CLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNiNUIsT0FEYSxDQUViUyxTQUZhLENBR2JVLFNBSGEsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IGRhdGFiYXNlID0gcmVxdWlyZShcIi4uL2RiL2RhdGFiYXNlLmpzXCIpO1xyXG5jb25zdCBPYmplY3RJZCA9IHJlcXVpcmUoXCJtb25nb2RiXCIpLk9iamVjdElkO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0RG9jcygpIHtcclxuICAgIGxldCBkYjtcclxuICAgIGxldCByZXN1bHQ7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBkYiA9IGF3YWl0IGRhdGFiYXNlLmdldERiKCk7XHJcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbi5maW5kKHt9KS50b0FycmF5KCk7XHJcbiAgICB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICBhd2FpdCBkYi5jbGllbnQuY2xvc2UoKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURvYyhib2R5KSB7XHJcbiAgbGV0IGRiO1xyXG5cclxuICB0cnkge1xyXG4gICAgICBkYiA9IGF3YWl0IGRhdGFiYXNlLmdldERiKCk7XHJcbiAgICAgIGNvbnN0IGRvYyA9IHtcclxuICAgICAgICAgIG5hbWU6IGJvZHkubmFtZSxcclxuICAgICAgICAgIGNvbnRlbnQ6IGJvZHkuY29udGVudCxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZG9jcy5pbnNlcnRPbmUoZG9jKTtcclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBgQSBuZXcgZG9jdW1lbnQgd2l0aCBfaWQ6ICR7cmVzdWx0Lmluc2VydGVkSWR9IHdhcyBjcmVhdGVkLmBcclxuICAgICAgKTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgICBhd2FpdCBkYi5jbGllbnQuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVEb2MoaWQsIGJvZHkpIHtcclxuICBsZXQgZGI7XHJcblxyXG4gIHRyeSB7XHJcbiAgICAgICAgZGIgPSBhd2FpdCBkYXRhYmFzZS5nZXREYigpO1xyXG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHsgX2lkOiBPYmplY3RJZChpZCkgfTtcclxuXHJcbiAgICAgICAgY29uc3QgZG9jID0ge1xyXG4gICAgICAgICAgICAkc2V0OiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBib2R5Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBib2R5LmNvbnRlbnQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbi51cGRhdGVPbmUoZmlsdGVyLCBkb2MpO1xyXG5cclxuICAgICAgICBpZiAocmVzdWx0Lm1hdGNoZWRDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm8gbWF0Y2hcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICBgJHtyZXN1bHQubWF0Y2hlZENvdW50fSAsIHVwZGF0ZWQgJHtyZXN1bHQubW9kaWZpZWRDb3VudH1gXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBhd2FpdCBkYi5jbGllbnQuY2xvc2UoKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBnZXREb2NzLFxyXG4gICAgY3JlYXRlRG9jLFxyXG4gICAgdXBkYXRlRG9jXHJcbn07XHJcbiJdfQ==