"use strict";function cov_21rcbt9bay(){var path="C:\\cygwin64\\home\\sofia\\dbwebb-kurser\\jsramverk\\backend\\src\\server.js";var hash="f8b8a3f4854b4baffc3380b67faa9fc7b3f02cc9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\cygwin64\\home\\sofia\\dbwebb-kurser\\jsramverk\\backend\\src\\server.js",statementMap:{"0":{start:{line:3,column:17},end:{line:3,column:45}},"1":{start:{line:4,column:17},end:{line:4,column:44}},"2":{start:{line:10,column:4},end:{line:17,column:5}},"3":{start:{line:11,column:8},end:{line:11,column:36}},"4":{start:{line:12,column:8},end:{line:12,column:56}},"5":{start:{line:15,column:8},end:{line:15,column:31}},"6":{start:{line:16,column:8},end:{line:16,column:21}},"7":{start:{line:24,column:2},end:{line:36,column:3}},"8":{start:{line:25,column:6},end:{line:25,column:34}},"9":{start:{line:26,column:18},end:{line:29,column:7}},"10":{start:{line:30,column:21},end:{line:30,column:55}},"11":{start:{line:31,column:6},end:{line:33,column:8}},"12":{start:{line:35,column:6},end:{line:35,column:30}},"13":{start:{line:43,column:2},end:{line:65,column:5}},"14":{start:{line:44,column:8},end:{line:44,column:36}},"15":{start:{line:45,column:23},end:{line:45,column:44}},"16":{start:{line:47,column:20},end:{line:52,column:9}},"17":{start:{line:54,column:23},end:{line:54,column:65}},"18":{start:{line:56,column:8},end:{line:62,column:9}},"19":{start:{line:57,column:12},end:{line:57,column:36}},"20":{start:{line:59,column:12},end:{line:61,column:14}},"21":{start:{line:64,column:8},end:{line:64,column:32}},"22":{start:{line:68,column:0},end:{line:72,column:2}}},fnMap:{"0":{name:"getDocs",decl:{start:{line:6,column:15},end:{line:6,column:22}},loc:{start:{line:6,column:25},end:{line:18,column:1}},line:6},"1":{name:"createDoc",decl:{start:{line:21,column:15},end:{line:21,column:24}},loc:{start:{line:21,column:31},end:{line:37,column:1}},line:21},"2":{name:"updateDoc",decl:{start:{line:40,column:15},end:{line:40,column:24}},loc:{start:{line:40,column:35},end:{line:66,column:1}},line:40}},branchMap:{"0":{loc:{start:{line:56,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:56,column:8},end:{line:62,column:9}},{start:{line:56,column:8},end:{line:62,column:9}}],line:56}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8b8a3f4854b4baffc3380b67faa9fc7b3f02cc9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_21rcbt9bay=function(){return actualCoverage;};}return actualCoverage;}cov_21rcbt9bay();const database=(cov_21rcbt9bay().s[0]++,require("../db/database.js"));const ObjectId=(cov_21rcbt9bay().s[1]++,require("mongodb").ObjectId);async function getDocs(){cov_21rcbt9bay().f[0]++;let db;let result;cov_21rcbt9bay().s[2]++;try{cov_21rcbt9bay().s[3]++;db=await database.getDb();cov_21rcbt9bay().s[4]++;result=await db.collection.find({}).toArray();}finally{cov_21rcbt9bay().s[5]++;await db.client.close();cov_21rcbt9bay().s[6]++;return result;}}async function createDoc(body){cov_21rcbt9bay().f[1]++;let db;cov_21rcbt9bay().s[7]++;try{cov_21rcbt9bay().s[8]++;db=await database.getDb();const doc=(cov_21rcbt9bay().s[9]++,{name:body.name,content:body.content});const result=(cov_21rcbt9bay().s[10]++,await db.collection.insertOne(doc));cov_21rcbt9bay().s[11]++;console.log(`A new document with _id: ${result.insertedId} was created.`);}finally{cov_21rcbt9bay().s[12]++;await db.client.close();}}async function updateDoc(id,body){cov_21rcbt9bay().f[2]++;let db;cov_21rcbt9bay().s[13]++;try{cov_21rcbt9bay().s[14]++;db=await database.getDb();const filter=(cov_21rcbt9bay().s[15]++,{_id:ObjectId(id)});const doc=(cov_21rcbt9bay().s[16]++,{$set:{name:body.name,content:body.content}});const result=(cov_21rcbt9bay().s[17]++,await db.collection.updateOne(filter,doc));cov_21rcbt9bay().s[18]++;if(result.matchedCount==0){cov_21rcbt9bay().b[0][0]++;cov_21rcbt9bay().s[19]++;console.log("No match");}else{cov_21rcbt9bay().b[0][1]++;cov_21rcbt9bay().s[20]++;console.log(`${result.matchedCount} , updated ${result.modifiedCount}`);}}finally{cov_21rcbt9bay().s[21]++;await db.client.close();}}cov_21rcbt9bay().s[22]++;module.exports={getDocs,createDoc,updateDoc};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJkYXRhYmFzZSIsInJlcXVpcmUiLCJPYmplY3RJZCIsImdldERvY3MiLCJkYiIsInJlc3VsdCIsImdldERiIiwiY29sbGVjdGlvbiIsImZpbmQiLCJ0b0FycmF5IiwiY2xpZW50IiwiY2xvc2UiLCJjcmVhdGVEb2MiLCJib2R5IiwiZG9jIiwibmFtZSIsImNvbnRlbnQiLCJpbnNlcnRPbmUiLCJjb25zb2xlIiwibG9nIiwiaW5zZXJ0ZWRJZCIsInVwZGF0ZURvYyIsImlkIiwiZmlsdGVyIiwiX2lkIiwiJHNldCIsInVwZGF0ZU9uZSIsIm1hdGNoZWRDb3VudCIsIm1vZGlmaWVkQ291bnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxhLHFwRkFlWTsyRkFiWixLQUFNQSxDQUFBQSxRQUFRLDBCQUFHQyxPQUFPLENBQUMsbUJBQUQsQ0FBVixDQUFkLENBQ0EsS0FBTUMsQ0FBQUEsUUFBUSwwQkFBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBUCxDQUFtQkMsUUFBdEIsQ0FBZCxDQUVBLGNBQWVDLENBQUFBLE9BQWYsRUFBeUIseUJBQ3JCLEdBQUlDLENBQUFBLEVBQUosQ0FDQSxHQUFJQyxDQUFBQSxNQUFKLENBRnFCLHdCQUlyQixHQUFJLHlCQUNBRCxFQUFFLENBQUcsS0FBTUosQ0FBQUEsUUFBUSxDQUFDTSxLQUFULEVBQVgsQ0FEQSx3QkFFQUQsTUFBTSxDQUFHLEtBQU1ELENBQUFBLEVBQUUsQ0FBQ0csVUFBSCxDQUFjQyxJQUFkLENBQW1CLEVBQW5CLEVBQXVCQyxPQUF2QixFQUFmLENBQ0gsQ0FIRCxPQUlRLHlCQUNKLEtBQU1MLENBQUFBLEVBQUUsQ0FBQ00sTUFBSCxDQUFVQyxLQUFWLEVBQU4sQ0FESSx3QkFFSixNQUFPTixDQUFBQSxNQUFQLENBQ0gsQ0FDSixDQUdELGNBQWVPLENBQUFBLFNBQWYsQ0FBeUJDLElBQXpCLENBQStCLHlCQUM3QixHQUFJVCxDQUFBQSxFQUFKLENBRDZCLHdCQUc3QixHQUFJLHlCQUNBQSxFQUFFLENBQUcsS0FBTUosQ0FBQUEsUUFBUSxDQUFDTSxLQUFULEVBQVgsQ0FDQSxLQUFNUSxDQUFBQSxHQUFHLDBCQUFHLENBQ1JDLElBQUksQ0FBRUYsSUFBSSxDQUFDRSxJQURILENBRVJDLE9BQU8sQ0FBRUgsSUFBSSxDQUFDRyxPQUZOLENBQUgsQ0FBVCxDQUlBLEtBQU1YLENBQUFBLE1BQU0sMkJBQUcsS0FBTUQsQ0FBQUEsRUFBRSxDQUFDRyxVQUFILENBQWNVLFNBQWQsQ0FBd0JILEdBQXhCLENBQVQsQ0FBWixDQU5BLHlCQU9BSSxPQUFPLENBQUNDLEdBQVIsQ0FDSyw0QkFBMkJkLE1BQU0sQ0FBQ2UsVUFBVyxlQURsRCxFQUdILENBVkQsT0FVVSwwQkFDTixLQUFNaEIsQ0FBQUEsRUFBRSxDQUFDTSxNQUFILENBQVVDLEtBQVYsRUFBTixDQUNILENBQ0YsQ0FHRCxjQUFlVSxDQUFBQSxTQUFmLENBQXlCQyxFQUF6QixDQUE2QlQsSUFBN0IsQ0FBbUMseUJBQ2pDLEdBQUlULENBQUFBLEVBQUosQ0FEaUMseUJBR2pDLEdBQUksMEJBQ0VBLEVBQUUsQ0FBRyxLQUFNSixDQUFBQSxRQUFRLENBQUNNLEtBQVQsRUFBWCxDQUNBLEtBQU1pQixDQUFBQSxNQUFNLDJCQUFHLENBQUVDLEdBQUcsQ0FBRXRCLFFBQVEsQ0FBQ29CLEVBQUQsQ0FBZixDQUFILENBQVosQ0FFQSxLQUFNUixDQUFBQSxHQUFHLDJCQUFHLENBQ1JXLElBQUksQ0FBRSxDQUNGVixJQUFJLENBQUVGLElBQUksQ0FBQ0UsSUFEVCxDQUVGQyxPQUFPLENBQUVILElBQUksQ0FBQ0csT0FGWixDQURFLENBQUgsQ0FBVCxDQU9BLEtBQU1YLENBQUFBLE1BQU0sMkJBQUcsS0FBTUQsQ0FBQUEsRUFBRSxDQUFDRyxVQUFILENBQWNtQixTQUFkLENBQXdCSCxNQUF4QixDQUFnQ1QsR0FBaEMsQ0FBVCxDQUFaLENBWEYseUJBYUUsR0FBSVQsTUFBTSxDQUFDc0IsWUFBUCxFQUF1QixDQUEzQixDQUE4QixxREFDMUJULE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFVBQVosRUFDSCxDQUZELElBRU8scURBQ0hELE9BQU8sQ0FBQ0MsR0FBUixDQUNLLEdBQUVkLE1BQU0sQ0FBQ3NCLFlBQWEsY0FBYXRCLE1BQU0sQ0FBQ3VCLGFBQWMsRUFEN0QsRUFHSCxDQUNKLENBcEJILE9Bb0JZLDBCQUNOLEtBQU14QixDQUFBQSxFQUFFLENBQUNNLE1BQUgsQ0FBVUMsS0FBVixFQUFOLENBQ0gsQ0FDSixDLHlCQUVEa0IsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2IzQixPQURhLENBRWJTLFNBRmEsQ0FHYlMsU0FIYSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3QgZGF0YWJhc2UgPSByZXF1aXJlKFwiLi4vZGIvZGF0YWJhc2UuanNcIik7XHJcbmNvbnN0IE9iamVjdElkID0gcmVxdWlyZShcIm1vbmdvZGJcIikuT2JqZWN0SWQ7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXREb2NzKCkge1xyXG4gICAgbGV0IGRiO1xyXG4gICAgbGV0IHJlc3VsdDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGRiID0gYXdhaXQgZGF0YWJhc2UuZ2V0RGIoKTtcclxuICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uLmZpbmQoe30pLnRvQXJyYXkoKTtcclxuICAgIH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIGF3YWl0IGRiLmNsaWVudC5jbG9zZSgpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlRG9jKGJvZHkpIHtcclxuICBsZXQgZGI7XHJcblxyXG4gIHRyeSB7XHJcbiAgICAgIGRiID0gYXdhaXQgZGF0YWJhc2UuZ2V0RGIoKTtcclxuICAgICAgY29uc3QgZG9jID0ge1xyXG4gICAgICAgICAgbmFtZTogYm9keS5uYW1lLFxyXG4gICAgICAgICAgY29udGVudDogYm9keS5jb250ZW50LFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uLmluc2VydE9uZShkb2MpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgIGBBIG5ldyBkb2N1bWVudCB3aXRoIF9pZDogJHtyZXN1bHQuaW5zZXJ0ZWRJZH0gd2FzIGNyZWF0ZWQuYFxyXG4gICAgICApO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICAgIGF3YWl0IGRiLmNsaWVudC5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURvYyhpZCwgYm9keSkge1xyXG4gIGxldCBkYjtcclxuXHJcbiAgdHJ5IHtcclxuICAgICAgICBkYiA9IGF3YWl0IGRhdGFiYXNlLmdldERiKCk7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyID0geyBfaWQ6IE9iamVjdElkKGlkKSB9O1xyXG5cclxuICAgICAgICBjb25zdCBkb2MgPSB7XHJcbiAgICAgICAgICAgICRzZXQ6IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGJvZHkubmFtZSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGJvZHkuY29udGVudCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uLnVwZGF0ZU9uZShmaWx0ZXIsIGRvYyk7XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHQubWF0Y2hlZENvdW50ID09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyBtYXRjaFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgIGAke3Jlc3VsdC5tYXRjaGVkQ291bnR9ICwgdXBkYXRlZCAke3Jlc3VsdC5tb2RpZmllZENvdW50fWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIGF3YWl0IGRiLmNsaWVudC5jbG9zZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGdldERvY3MsXHJcbiAgICBjcmVhdGVEb2MsXHJcbiAgICB1cGRhdGVEb2NcclxufTtcclxuIl19