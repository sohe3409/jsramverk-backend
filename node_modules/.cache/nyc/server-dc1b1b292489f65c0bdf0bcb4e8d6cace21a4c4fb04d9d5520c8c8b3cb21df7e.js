"use strict";

const database = require("../db/database.js");


async function getDocs() {
  all: async function run() {
        let db;
        let result;

        try {
            // connect to db
            db = await database.getDb();
            // get content
            result = await db.collection.find({}).toArray();
        }
        finally {
            await db.client.close()
            return result
        }
    }
}

//
// async function createDoc(body) {
//   try {
//       await client.connect();
//       const database = client.db("editor");
//       const docs = database.collection("docs");
//       const doc = {
//           name: body.name,
//           content: body.content,
//       };
//       const result = await docs.insertOne(doc);
//       console.log(
//           `A new document with _id: ${result.insertedId} was created.`
//       );
//   } finally {
//       await client.close();
//   }
// }
//
//
// async function updateDoc(id, body) {
//     try {
//         await client.connect();
//         const db = client.db("editor");
//         const docs = db.collection("docs");
//         const filter = { _id: ObjectId(id) };
//         const options = { upsert: true };
//
//         const doc = {
//             $set: {
//                 name: body.name,
//                 content: body.content,
//             },
//         };
//
//         const result = await docs.updateOne(filter, doc);
//
//         if (result.matchedCount == 0) {
//             console.log("No match");
//         } else {
//             console.log(
//                 `${result.matchedCount} , updated ${result.modifiedCount}`
//             );
//         }
//     } finally {
//         await client.close();
//     }
// }

module.exports = {
    getDocs,
    // getDoc,
    // createDoc,
    // updateDoc
};
